# 麦麦TRPG骰娘插件

---

> [!NOTE]
> 该插件仍属于早期测试阶段，只还原了部分基础功能 ； 如游玩过程中发现不妥或bug，欢迎Issues反馈

## ✨功能说明

___让麦麦来帮助你们的TRPG___

1.支持自定义掷骰

2.允许用户创建角色加入游戏，角色与用户QQ强绑定，允许跨群

3.允许使用角色属性进行快速检定，支持自定义属性

4.支持热重载

5.本插件暂不提供DM

## 🍔食用方法

1.安装本插件并正常运行

2.在你和伙伴们中选出一位领导者作为DM

3.使用 `/创建角色` 或 `/st` 命令创建属于你和伙伴们各自的角色

4.尽情玩耍吧

## 🌐安装方法

1.下载或克隆本仓库
  ```bash
  git colne https://github.com/WaterInk0101/coc_dice_plugin.git
  ```
2.将本插件文件放置到对应插件目录 `/plugins` 中

3.重启maibot主程序，自动生成配置文件

## ❔命令使用方法

```bash
  /r [表达式] [原因]
  /掷骰 [表达式] [原因]                     //掷出骰子，原因可留空  例：/r 2d100+2
  
  /rd [阈值]或[属性名]+[修正值] [原因]
  /检定 [阈值]或[属性名]+[修正值] [原因]     //使用[阈值]或[属性名]进行检定，修正值、原因可留空  
  
  /创建角色 [昵称]                         //使用默认公式随机生成的属性进行游戏，[昵称]留空则默认使用用户QQ昵称  
  
  /st [属性名][值]或[属性名][表达式]     
  /导入 [属性名][值]或[属性名][表达式]      //自定义你的属性，可同时导入多个属性，范围0~200,初次导入时未指定的属性会使用默认公式填充

  /del [属性名]
  /删除 [属性名]                          //删除对应属性

  /del_all
  /删除角色                               //删除您的角色

  /qc
  /查询角色                               //查看当前角色的基础属性

  /qs
  /查询技能                               //查看当前角色除基础属性外的技能属性

  /qs [属性名]
  /查询技能 [属性名]                      //查看当前角色的指定属性

  /sc [值]或[表达式]/[值]或[表达式]
  /san检定 [值]或[表达式]/[值]或[表达式]   //使用当前角色的理智进行检定，检定成功则扣除/前的值，失败则扣除/后的值

  /nn [新昵称]                           //将用户角色更名为[新昵称]

```

 _为了方便已有角色卡导入，使用 ```/导入``` 或 ```/st``` 导入时属性间可以无需空格,例如```/st 力量21敏捷30教育2d100```_

_甚至```/st 力量21DEX30edu2d100```这种我第一眼都看不清的格式都可以_

_但有小概率出现误判情况，虽不影响正常游玩，但还是建议属性间使用空格区分开 ~~（嫌麻烦就算了）~~_

<div class="center">

### 固定属性
|属性|值|
|---|---|
|生命(HP)|12|
|魔力(MP)|10|
|理智(SAN)|50|

### 基础属性默认公式表
|属性|公式|
|---|---|
|力量(STR)|3d6 x5|
|体质(CON)|3d6 x5|
|体型(SIZ)|(2d6+6)x5|
|敏捷(DEX)|3d6 x5|
|外貌(APP)|3d6 x5|
|智力(INT)|(2d6+6)x5|
|意志(POW)|(2d6+6)x5|
|教育(EDU)|(2d6+6)x5|
|幸运(LUCK)|3d6 x5|

### 自动计算属性
|属性|公式|
|---|---|
|伤害加值(DB)|力量 (STR) + 体型 (SIZ)的值<br>2-64时为-2<br>65-84时为-1<br>85-124时为0<br>125-164时为1d4<br>165-20时为1d6<br>≥205时为2d6|
|闪避值(DODGE)|敏捷 (DEX) ÷ 2|
|移动力(MOV)|DEX < SIZ 且 STR < SIZ：MOV 为 7<br>DEX ≥ SIZ 或 STR ≥ SIZ：MOV 为 8<br>DEX > SIZ 且 STR > SIZ：MOV 为 9|

</div>

## ⚙️配置选项

```bash
# 插件基础配置
[plugin]

# 是否启用插件
enabled = true


# 骰子/检定配置
[dice]

# 显示投掷详情
show_detail = true

# D100大成功阈值
success_threshold = 5

# D100大失败阈值
fail_threshold = 96

# 默认提示
default_message = "🎲 骰子投掷完成！"

# 掷骰模板
roll_template = "🎲 {nickname}投掷「{表达式}」结果：\n{原因说明}\n单次结果：{单次结果}\n修正值：{修正值}\n总计：{总计}\n{判定结果}"

# 检定模板
check_template = "🎲 {nickname}的检定（阈值：{阈值}）\n{reason_desc}\n投掷结果：{投掷结果}\n{判定结果}"

# SAN值检定专用模板
san_check_template = "🎲 🌀 {nickname}的SAN值（理智）检定\n{reason_desc}\n{nickname}的当前SAN值：{current_san}（检定阈值）\nD100投掷结果：{roll_result}\n{judge_result}\n➡️ 扣除SAN值：{deduct_value}（{deduct_type}）\n🔹 扣除前SAN值：{before_san}\n🔹 扣除后SAN值：{after_san}\n"


# 角色配置
[character]

# 创建角色模板
output_template = "🎭 {nickname}的角色属性：\n{属性列表}\n📊 核心基础属性总值：{总属性}\n"

# 查询角色模板
query_template = "🎭 {nickname}的绑定角色属性：\n{基础属性列表}\n📊 核心基础属性总数：{基础总属性}\n"

# 查询技能模板
skill_query_template = "🎭 {nickname}的角色技能列表：\n{技能列表}\n📊 技能总数：{skill_count}\n"

# 单个技能查询模板
single_skill_template = "🎭 {nickname}的角色技能/属性查询结果：\n🔹 {skill_name}：{skill_value}\n"


# 属性导入配置
[import_attr]

# 导入成功模板
success_template = "✅ {nickname}的角色属性修改/新增成功！\n{自动创建提示}\n修改/新增的属性：\n{修改列表}\n📊 当前核心基础属性总值：{基础总属性}\n"

# 自动创建提示
auto_create_tip = "🔔 检测到你未创建角色，已自动生成预设属性并新增/覆盖指定值！"

# 更新提示
update_tip = "🔔 已新增/覆盖你指定的属性值！"

# 导入错误模板
error_template = "❌ 属性修改失败：\n{错误原因}\n💡 正确格式：/st 力量80敏捷75 或 /st 力量80 感知75（属性值范围0-200）\n💡 基础属性：{基础属性列表}\n"


# 属性删除配置
[delete_attr]

# 删除属性成功模板
success_template = "✅ {nickname}的角色属性操作成功！\n{操作描述}\n📊 当前核心基础属性总值：{基础总属性}\n"

# 删除角色成功模板
delete_role_template = "✅ {nickname}的角色已删除成功！\n你的所有角色数据已清空，可发送「/创建角色」重新生成。"

# 删除属性错误模板
error_template = "❌ 属性操作失败：\n{错误原因}\n💡 支持的操作：\n1. /删除 [基础属性名] → 重置为默认值（如/删除 力量）\n2. /删除 [自定义技能名] → 直接删除（如/删除 感知）\n"


# 角色改名配置
[rename]

# 改名成功模板
success_template = "✅ {old_nickname}的角色已成功改名为「{new_nickname}」！\n"

# 改名错误模板
error_template = "❌ 角色改名失败：\n{错误原因}\n💡 正确格式：/nn [新昵称]（如/nn 冒险者小明）"

```
  

## ⚠️注意事项  

当有人创建角色后，插件会自动生成 `character_data.json` 于插件目录下，用于保存角色数据

_部分代码由AI生成_
