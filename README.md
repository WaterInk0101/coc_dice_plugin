# 麦麦TRPG骰娘插件

---

> [!NOTE]
> 该插件仍属于早期测试阶段，只还原了部分基础功能 ； 如游玩过程中发现不妥或bug，欢迎Issues反馈

## ✨功能说明

___让麦麦来帮助你们的TRPG___

1.支持自定义掷骰

2.允许用户创建角色加入游戏，角色与用户QQ强绑定，允许跨群

3.允许使用角色属性进行快速检定，支持自定义属性

4.支持热重载

5.本插件暂不提供DM

## 🍔食用方法

1.安装本插件并正常运行

2.在你和伙伴们中选出一位领导者作为DM

3.使用 `/创建角色` 或 `/st` 命令创建属于你和伙伴们各自的角色

4.尽情玩耍吧

## 🌐安装方法

1.下载或克隆本仓库
  ```bash
  git colne https://github.com/WaterInk0101/coc_dice_plugin.git
  ```
2.将本插件文件放置到对应插件目录 `/plugins` 中

3.重启maibot主程序，自动生成配置文件

## ❔命令使用方法

```bash
  /r [表达式] [原因]
  /掷骰 [表达式] [原因]                     //掷出骰子，原因可留空  例：/r 2d100+2
  
  /rd [阈值]或[属性名] [原因]
  /检定 [阈值]或[属性名] [原因]             //使用[阈值]或[属性名]进行检定，原因可留空  
  
  /创建角色                                //使用默认公式随机生成的属性进行游戏  
  
  /st [属性名][属性值] [属性名][属性值]     
  /导入 [属性名][属性值] [属性名][属性值]   //自定义你的属性，可同时导入多个属性，范围1~200,初次导入时未指定的属性会使用默认公式填充

  /del [属性名]
  /删除 [属性名]                          //删除对应属性

  /del_all
  /删除角色                               //删除您的角色

  /查询角色                               //查看当前角色的基础属性

  /qs
  /查询技能                               //查看当前角色除基础属性外的技能属性

  /qs [属性名]
  /查询技能 [属性名]                        //查看当前角色的指定属性

  /sc [值]或[表达式]/[值]或[表达式]
  /san检定 [值]或[表达式]/[值]或[表达式]   //使用当前角色的理智进行检定，检定成功则扣除/前的值，失败则扣除/后的值

```

 _为了方便已有角色卡导入，使用 ```/导入``` 或 ```/st``` 导入时属性间可以无需空格,例如```/st 力量21敏捷30教育12```_

_但会出现误判情况，虽不影响正常游玩，但还是建议属性间使用空格区分开_

### 默认属性公式表
|属性|公式|
|---|---|
|生命(HP)|12|
|魔力(MP)|10|
|理智(SAN)|50|
|力量(STR)|3d6 x5|
|体质(CON)|3d6 x5|
|体型(SIZ)|(2d6+6)x5|
|敏捷(DEX)|3d6 x5|
|外貌(APP)|3d6 x5|
|智力(INT)|(2d6+6)x5|
|意志(POW)|(2d6+6)x5|
|教育(EDU)|(2d6+6)x5|
|幸运(LUCK)|3d6 x5|

### 默认且不可更改的属性
|属性|公式|
|---|---|
|伤害加值|力量 (STR) + 体型 (SIZ)的值2-64时为-2，65-84时为-1，85-124时为0，125-164时为+1D4，165-20时为+1D6，大于等于205时为2D6|
|闪避值|敏捷 (DEX) ÷ 2|
|移动力 (MOV)|DEX < SIZ 且 STR < SIZ：MOV 为 7。 DEX ≥ SIZ 或 STR ≥ SIZ（其中之一成立）：MOV 为 8。 DEX > SIZ 且 STR > SIZ：MOV 为 9|

## ⚙️配置选项

```bash
[plugin]

# 是否启用插件
enabled = true

# 骰子/检定配置
[dice]

# 显示投掷详情
show_detail = true

# D100大成功阈值
success_threshold = 5

# D100大失败阈值
fail_threshold = 96

# 默认提示
default_message = "🎲 骰子投掷完成！"

# 掷骰模板
roll_template = "🎲 投掷「{表达式}」结果：\n{原因说明}\n单次结果：{单次结果}\n修正值：{修正值}\n总计：{总计}\n{判定结果}"

# 检定模板
check_template = "🎲 克苏鲁检定（阈值：{阈值}）\n{原因说明}\n投掷结果：{投掷结果}\n{判定结果}"


# 角色配置
[character]

# 创建角色模板
output_template = "🎭 随机生成跑团基础属性：\n{属性列表}\n📊 预设属性总值：{总属性}\n💡 支持导入自定义属性（如/导入 感知80 魅力75）"

# 查询角色模板
query_template = "🎭 你的绑定角色属性：\n{预设属性列表}\n{自定义属性列表}\n📊 预设属性总值：{预设总属性}\n📊 所有属性总数：{属性总数}\n💡 提示：/rd [属性名] 可检定任意属性（如/rd 力量、/rd 感知）"


# 属性导入配置
[import_attr]

# 导入成功模板
success_template = "✅ 角色属性修改/新增成功！\n{自动创建提示}\n修改/新增的属性：\n{修改列表}\n📊 当前预设属性总值：{预设总属性}\n📊 所有属性总数：{属性总数}\n💡 发送「/查询角色」查看完整属性，/rd [属性名] 检定属性"

# 自动创建提示
auto_create_tip = "🔔 检测到你未创建角色，已自动生成预设属性并新增/覆盖指定值！"

# 更新提示
update_tip = "🔔 已新增/覆盖你指定的属性值！"

# 导入错误模板
error_template = "❌ 属性修改失败：\n{错误原因}\n💡 正确格式：/st 力量80 感知75（属性值范围1-200，支持自定义属性）\n💡 预设属性：{预设属性列表}"


# 属性删除配置
[delete_attr]

# 删除属性成功模板
success_template = "✅ 属性操作成功！\n{操作描述}\n📊 当前预设属性总值：{预设总属性}\n📊 所有属性总数：{属性总数}\n💡 发送「/查询角色」查看最新属性"

# 删除角色成功模板
delete_role_template = "✅ 角色删除成功！\n你的所有角色数据（预设属性+自定义属性）已清空，可发送「/创建角色」重新生成。"

# 删除属性错误模板
error_template = "❌ 属性操作失败：\n{错误原因}\n💡 支持的操作：\n1. /删除 [属性名] → 删除/重置属性（如/删除 感知、/删除 力量）\n2. /删除角色 → 删除整个角色数据"

```
  

## ⚠️注意事项  

当有人创建角色后，插件会自动生成 `character_data.json` 于插件目录下，用于保存角色数据
